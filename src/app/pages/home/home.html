<div class="main-container">
    <div class="navbar-container">
        <button matButton="tonal" matTooltip="Click to change username" (click)="openChangeUsernameDialog()">Hello, {{username}}</button>
        <button matButton="outlined" (click)="signout()"><mat-icon fontIcon="logout"></mat-icon>Signout</button>
    </div>
    <mat-drawer-container>
        <mat-drawer #sidenav mode="over" closed class="sidenav">
            <button matMiniFab (click)="sidenav.toggle()" style="margin:10px;"><mat-icon>arrow_back</mat-icon></button>
            <mat-tab-group>
                <mat-tab label="All users">
                    <mat-list *ngFor="let user of allUsers">
                            <mat-list-item><button (click)="openPrivateChat(user.id)" [ngClass]="user.online ? 'online-user-button' : 'offline-user-button'" matButton="outlined"><mat-icon>person</mat-icon>{{user.username}}</button></mat-list-item>
                            <mat-divider></mat-divider>
                    </mat-list>
                </mat-tab>
                <mat-tab label="Online users">
                    <mat-list *ngFor="let user of onlineUsers">
                        <mat-list-item><button (click)="openPrivateChat(user.id)" matButton="outlined" class="online-user-button"><mat-icon>person</mat-icon>{{user.username}}</button></mat-list-item> 
                        <mat-divider></mat-divider>
                    </mat-list>
                </mat-tab>
                <mat-tab label="Groups">
                    <mat-tab-group>
                        <mat-tab label="Public Groups"></mat-tab>
                        <mat-tab label="Password Groups"></mat-tab>
                        <mat-tab label="Private Groups"></mat-tab>
                    </mat-tab-group>
                </mat-tab>
            </mat-tab-group>
        </mat-drawer>
        <mat-drawer-content>
            <button matMiniFab (click)="sidenav.toggle()"><mat-icon>chat</mat-icon></button>
            @if(selectedRoom){
                <app-chat-window (closeChat)="chatCloseChildEvent()" [roomId]="selectedRoom"></app-chat-window>
            }@else if (isLoading){
                <div class="no-chat-opened-container">
                    <h2>Loading...</h2>
                </div>
            }@else{
                <div class="no-chat-opened-container">
                    <h2>Chat with other users, or create chatrooms!</h2>
                    <button (click)="sidenav.toggle()" matButton="outlined" style="background-color: #faf9fd;">Start chatting...</button>
                </div>
            }
        </mat-drawer-content>
    </mat-drawer-container>
</div>